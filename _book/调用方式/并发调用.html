
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>并发调用 · AL网络框架替换及使用文档</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Aaron Tsai">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../UML/" />
    
    
    <link rel="prev" href="嵌套调用.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../目的/">
            
                <a href="../目的/">
            
                    
                    目的
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../目的/旧版本问题.html">
            
                <a href="../目的/旧版本问题.html">
            
                    
                    旧版本问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../目的/新版本优势.html">
            
                <a href="../目的/新版本优势.html">
            
                    
                    新版本优势
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../封装思想/封装思想.html">
            
                <a href="../封装思想/封装思想.html">
            
                    
                    封装思想
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../依赖库/">
            
                <a href="../依赖库/">
            
                    
                    依赖库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../依赖库/Rxjava2.html">
            
                <a href="../依赖库/Rxjava2.html">
            
                    
                    RxJava2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../依赖库/Gson.html">
            
                <a href="../依赖库/Gson.html">
            
                    
                    Gson
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../依赖库/RxAndroid.html">
            
                <a href="../依赖库/RxAndroid.html">
            
                    
                    RxAndroid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../依赖库/RxLifeCyler.html">
            
                <a href="../依赖库/RxLifeCyler.html">
            
                    
                    RxLifeCycler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../依赖库/OkHttp3.html">
            
                <a href="../依赖库/OkHttp3.html">
            
                    
                    Okhttp3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../依赖库/Stetho.html">
            
                <a href="../依赖库/Stetho.html">
            
                    
                    Stetho
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    调用方式
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="基本调用.html">
            
                <a href="基本调用.html">
            
                    
                    基本调用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="嵌套调用.html">
            
                <a href="嵌套调用.html">
            
                    
                    嵌套调用
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.3" data-path="并发调用.html">
            
                <a href="并发调用.html">
            
                    
                    并发调用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../UML/">
            
                <a href="../UML/">
            
                    
                    UML
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >并发调用</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="&#x5E76;&#x53D1;&#x8C03;&#x7528;">&#x5E76;&#x53D1;&#x8C03;&#x7528;</h1>
<p>&#x5B66;&#x4E60;&#x5E76;&#x53D1;&#x8C03;&#x7528;&#x524D;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x5B66;&#x4E60;&#x4E0B;RxJava zip&#x64CD;&#x4F5C;&#x7B26;&#x7684;&#x4F7F;&#x7528;,&#x5DF2;&#x7ECF;&#x4E86;&#x89E3;&#x8FC7;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7565;&#x8FC7;&#x3002;</p>
<h2 id="zip">ZIP</h2>
<p>&#x5B98;&#x7F51;&#x89E3;&#x91CA;:</p>
<blockquote>
<p>The Zip method returns an Observable that applies a function of your choosing to the combination of items emitted, in sequence, by two (or more) other Observables, with the results of this function becoming the items emitted by the returned Observable. It applies this function in strict sequence, so the first item emitted by the new Observable will be the result of the function applied to the first item emitted by Observable #1 and the first item emitted by Observable #2; the second item emitted by the new zip-Observable will be the result of the function applied to the second item emitted by Observable #1 and the second item emitted by Observable #2; and so forth. It will only emit as many items as the number of items emitted by the source Observable that emits the fewest items.</p>
</blockquote>
<p>&#x7B80;&#x800C;&#x8A00;&#x4E4B;,&#x901A;&#x8FC7;zip&#x51FD;&#x6570;&#x5C06;&#x591A;&#x4E2A;Observable&#x7ED3;&#x5408;&#x5728;&#x4E00;&#x8D77;&#x7EC4;&#x6210;&#x4E00;&#x4E2A;&#x65B0;&#x7684;Observable&#x3002;</p>
<p>&#x4E0A;&#x56FE;:</p>
<p><img src="https://img-blog.csdn.net/20160902172911913" alt="&#x6570;&#x636E;&#x6D41;&#x5411;&#x56FE;"></p>
<p>&#x7136;&#x540E;&#x7ED3;&#x5408;&#x573A;&#x666F;:
&#x5047;&#x8BBE;&#x9996;&#x9875;&#x9875;&#x9762;&#x7684;&#x5C55;&#x793A;&#x9700;&#x8981;2&#x4E2A;&#x63A5;&#x53E3;&#x7684;&#x8C03;&#x7528;&#x3002;</p>
<ol>
<li>&#x63A8;&#x8350;&#x5546;&#x54C1; API1 &#x7F51;&#x7EDC;&#x5E94;&#x7B54;-&gt;response1</li>
<li>&#x666E;&#x901A;&#x5546;&#x54C1; API2 &#x7F51;&#x7EDC;&#x5E94;&#x7B54;-&gt;response2</li>
</ol>
<p>&#x6700;&#x540E;&#x5E0C;&#x671B;&#x628A;&#x5B83;&#x4EEC;&#x7EC4;&#x5408;&#x6210;&#x4E00;&#x4E2A;response3&#x6765;&#x5C55;&#x793A;&#x9996;&#x9875;&#x5546;&#x54C1;&#x6570;&#x636E;&#x3002;</p>
<p><strong>&#x4E0A;&#x7801;:</strong></p>
<pre><code class="lang-java">Observable&lt;Response1&gt; request1 = API.getService.getRecommond();
Observable&lt;Response2&gt; request2 = API.getService.getNormal();
Observable.zip(request1, request2, <span class="hljs-keyword">new</span> BiFuncation&lt;Response1, Response2, Response3&gt;) {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Response3 <span class="hljs-title">apply</span><span class="hljs-params">(Response1 r1, Response2 r2)</span> <span class="hljs-keyword">throws</span> Exception </span>{    
        <span class="hljs-keyword">return</span> merge(r1, r2);

    }
    .compose(<span class="hljs-keyword">this</span>.bindToLifecyler())
    .subscribeOn(Schedulers.io())
    .observeOn(AndroidSchedulers.mainThread())
    .subscribe(<span class="hljs-keyword">new</span> DefaultObserver&lt;Response3&gt;() {
        <span class="hljs-comment">// &#x5C55;&#x793A;&#x9996;&#x9875;&#x5546;&#x54C1;</span>
        showHomePageData();

    })


}
</code></pre>
<p>&#x8FD9;&#x4E2A;&#x7AE0;&#x8282;&#x5C31;&#x662F;&#x4EE5;Retrofit&#x4E3A;&#x4F8B;&#x5B50;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x9002;&#x7528;&#x4E8E;&#x4EFB;&#x4F55;&#x7684;Onservable&#x3002;&#x8FD8;&#x6709;&#x672C;&#x8282;&#x53EA;&#x6D89;&#x53CA;&#x5230;&#x4E86;&#x4E24;&#x4E2A;&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x662F;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x4E09;&#x4E2A;&#x6216;&#x8005;&#x66F4;&#x591A;&#x8BF7;&#x6C42;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x89E6;&#x7C7B;&#x65C1;&#x901A;&#x3002;</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="嵌套调用.html" class="navigation navigation-prev " aria-label="Previous page: 嵌套调用">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../UML/" class="navigation navigation-next " aria-label="Next page: UML">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"并发调用","level":"1.5.3","depth":2,"next":{"title":"UML","level":"1.6","depth":1,"path":"UML/README.md","ref":"UML/README.md","articles":[]},"previous":{"title":"嵌套调用","level":"1.5.2","depth":2,"path":"调用方式/嵌套调用.md","ref":"调用方式/嵌套调用.md","articles":[]},"dir":"ltr"},"config":{"plugins":["livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Aaron Tsai","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"AL网络框架替换及使用文档","gitbook":"*","description":"由于async-http-client的网络框架已过时，造成维护成本高，开发易用性差，现将其替换成okhttp3"},"file":{"path":"调用方式/并发调用.md","mtime":"2018-04-03T08:48:33.322Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-04-27T11:33:50.789Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

